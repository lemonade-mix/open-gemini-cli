<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="21" failures="3" errors="0" time="0.100838124">
    <testsuite name="src/agent/task.test.ts" timestamp="2025-12-14T09:57:44.772Z" hostname="Zen2s-MacBook-Pro.local" tests="1" failures="0" errors="0" skipped="0" time="0.004325542">
        <testcase classname="src/agent/task.test.ts" name="Task &gt; scheduleToolCalls should not modify the input requests array" time="0.003915041">
            <system-out>
[INFO] 2025-12-14 20:57:44.610 PM -- [Task] Scheduling batch of 1 tool calls.
[INFO] 2025-12-14 20:57:44.611 PM -- [Task] Scheduler tool calls updated:
{
  &quot;0&quot;: &quot;1 (error)&quot;
}
[INFO] 2025-12-14 20:57:44.611 PM -- [Task] All tool calls completed by scheduler (batch):
{
  &quot;0&quot;: &quot;1&quot;
}

[INFO] 2025-12-14 20:57:44.612 PM -- [Task] Scheduler tool calls updated:

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/http/app.test.ts" timestamp="2025-12-14T09:57:44.773Z" hostname="Zen2s-MacBook-Pro.local" tests="5" failures="0" errors="0" skipped="0" time="0.031487041">
        <testcase classname="src/http/app.test.ts" name="E2E Tests &gt; should create a new task and stream status updates (text-content) via POST /" time="0.017369709">
        </testcase>
        <testcase classname="src/http/app.test.ts" name="E2E Tests &gt; should create a new task, schedule a tool call, and wait for approval" time="0.003227458">
        </testcase>
        <testcase classname="src/http/app.test.ts" name="E2E Tests &gt; should handle multiple tool calls in a single turn" time="0.0019285">
        </testcase>
        <testcase classname="src/http/app.test.ts" name="E2E Tests &gt; should handle tool calls that do not require approval" time="0.002776959">
            <system-out>
üîÑ ADAPTER_PARTLISTUNION_TO_KAIDEX_ARRAY: Input type: string isArray: [33mfalse[39m
üîÑ ADAPTER_PARTLISTUNION_TO_KAIDEX_ARRAY: Input value: &quot;Tool executed successfully.&quot;

üîÑ ADAPTER_PARTLISTUNION_TO_KAIDEX_ARRAY: Input type: object isArray: [33mtrue[39m
üîÑ ADAPTER_PARTLISTUNION_TO_KAIDEX_ARRAY: Input value: [
  {
    &quot;functionResponse&quot;: {
      &quot;name&quot;: &quot;test-tool-no-approval&quot;,
      &quot;response&quot;: {
        &quot;output&quot;: &quot;Tool executed successfully.&quot;,
        &quot;id&quot;: &quot;test-call-id-no-approval&quot;
      }
    }
  }
]
üîÑ ADAPTER_GOOGLE_TO_KAIDEX: Converting Google Part to Kaidex Part {
  &quot;functionResponse&quot;: {
    &quot;name&quot;: &quot;test-tool-no-approval&quot;,
    &quot;response&quot;: {
      &quot;output&quot;: &quot;Tool executed successfully.&quot;,
      &quot;id&quot;: &quot;test-call-id-no-approval&quot;
    }
  }
}

            </system-out>
        </testcase>
        <testcase classname="src/http/app.test.ts" name="E2E Tests &gt; should bypass tool approval in YOLO mode" time="0.002340375">
            <system-out>
üîÑ ADAPTER_PARTLISTUNION_TO_KAIDEX_ARRAY: Input type: string isArray: [33mfalse[39m
üîÑ ADAPTER_PARTLISTUNION_TO_KAIDEX_ARRAY: Input value: &quot;Tool executed successfully.&quot;

üîÑ ADAPTER_PARTLISTUNION_TO_KAIDEX_ARRAY: Input type: object isArray: [33mtrue[39m
üîÑ ADAPTER_PARTLISTUNION_TO_KAIDEX_ARRAY: Input value: [
  {
    &quot;functionResponse&quot;: {
      &quot;name&quot;: &quot;test-tool-yolo&quot;,
      &quot;response&quot;: {
        &quot;output&quot;: &quot;Tool executed successfully.&quot;,
        &quot;id&quot;: &quot;test-call-id-yolo&quot;
      }
    }
  }
]
üîÑ ADAPTER_GOOGLE_TO_KAIDEX: Converting Google Part to Kaidex Part {
  &quot;functionResponse&quot;: {
    &quot;name&quot;: &quot;test-tool-yolo&quot;,
    &quot;response&quot;: {
      &quot;output&quot;: &quot;Tool executed successfully.&quot;,
      &quot;id&quot;: &quot;test-call-id-yolo&quot;
    }
  }
}

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="src/http/endpoints.test.ts" timestamp="2025-12-14T09:57:44.773Z" hostname="Zen2s-MacBook-Pro.local" tests="5" failures="3" errors="0" skipped="0" time="0.055499291">
        <testcase classname="src/http/endpoints.test.ts" name="Agent Server Endpoints &gt; should create a new task via POST /tasks" time="0.0381245">
            <system-out>
üèóÔ∏è CHAT_CREATION_START: startChat initializing
üîÑ ENVIRONMENT_CONTEXT_GATHER: Building context message

üîÑ ENVIRONMENT_CONTEXT_READY: parts: [33m1[39m
üõ†Ô∏è TOOL_DECLARATIONS_READY: tools: [33m13[39m
‚ú® SYSTEM_INJECT_READY: prompt length: [33m18238[39m
üèóÔ∏è CHAT_CREATION_COMPLETE: KaiDexChat ready

            </system-out>
            <failure message="expected 500 to be 201 // Object.is equality" type="AssertionError">
AssertionError: expected 500 to be 201 // Object.is equality

- Expected
+ Received

- 201
+ 500

 ‚ùØ src/http/endpoints.test.ts:112:29
            </failure>
        </testcase>
        <testcase classname="src/http/endpoints.test.ts" name="Agent Server Endpoints &gt; should get metadata for a specific task via GET /tasks/:taskId/metadata" time="0.006816208">
            <system-out>
üèóÔ∏è CHAT_CREATION_START: startChat initializing
üîÑ ENVIRONMENT_CONTEXT_GATHER: Building context message

üîÑ ENVIRONMENT_CONTEXT_READY: parts: [33m1[39m
üõ†Ô∏è TOOL_DECLARATIONS_READY: tools: [33m13[39m
‚ú® SYSTEM_INJECT_READY: prompt length: [33m18238[39m
üèóÔ∏è CHAT_CREATION_COMPLETE: KaiDexChat ready

            </system-out>
            <failure message="expected 404 to be 200 // Object.is equality" type="AssertionError">
AssertionError: expected 404 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 404

 ‚ùØ src/http/endpoints.test.ts:120:29
            </failure>
        </testcase>
        <testcase classname="src/http/endpoints.test.ts" name="Agent Server Endpoints &gt; should get metadata for all tasks via GET /tasks/metadata" time="0.004955209">
            <system-out>
üèóÔ∏è CHAT_CREATION_START: startChat initializing
üîÑ ENVIRONMENT_CONTEXT_GATHER: Building context message

üîÑ ENVIRONMENT_CONTEXT_READY: parts: [33m1[39m
üõ†Ô∏è TOOL_DECLARATIONS_READY: tools: [33m13[39m
‚ú® SYSTEM_INJECT_READY: prompt length: [33m18238[39m
üèóÔ∏è CHAT_CREATION_COMPLETE: KaiDexChat ready

            </system-out>
            <failure message="expected 204 to be 200 // Object.is equality" type="AssertionError">
AssertionError: expected 204 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 204

 ‚ùØ src/http/endpoints.test.ts:128:29
            </failure>
        </testcase>
        <testcase classname="src/http/endpoints.test.ts" name="Agent Server Endpoints &gt; should return 404 for a non-existent task" time="0.00096325">
        </testcase>
        <testcase classname="src/http/endpoints.test.ts" name="Agent Server Endpoints &gt; should return agent metadata via GET /.well-known/agent-card.json" time="0.000831458">
        </testcase>
    </testsuite>
    <testsuite name="src/persistence/gcs.test.ts" timestamp="2025-12-14T09:57:44.774Z" hostname="Zen2s-MacBook-Pro.local" tests="10" failures="0" errors="0" skipped="0" time="0.00952625">
        <testcase classname="src/persistence/gcs.test.ts" name="GCSTaskStore &gt; Constructor &amp; Initialization &gt; should initialize and check bucket existence" time="0.002769">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="GCSTaskStore &gt; Constructor &amp; Initialization &gt; should create bucket if it does not exist" time="0.00079825">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="GCSTaskStore &gt; Constructor &amp; Initialization &gt; should throw if bucket creation fails" time="0.000737791">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="GCSTaskStore &gt; save &gt; should save metadata and workspace" time="0.002007875">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="GCSTaskStore &gt; save &gt; should handle tar creation failure" time="0.00064575">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="GCSTaskStore &gt; load &gt; should load task metadata and workspace" time="0.000869708">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="GCSTaskStore &gt; load &gt; should return undefined if metadata not found" time="0.000417375">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="GCSTaskStore &gt; load &gt; should load metadata even if workspace not found" time="0.000403375">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="NoOpTaskStore &gt; should not call the real store&apos;s save method" time="0.000104458">
        </testcase>
        <testcase classname="src/persistence/gcs.test.ts" name="NoOpTaskStore &gt; should delegate the load method to the real store" time="0.000111917">
        </testcase>
    </testsuite>
</testsuites>
